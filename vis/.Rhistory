legend.position = c(0.8, 0.85),
axis.title = element_text(size = 4),
legend.title = element_text(size = 4),
legend.text = element_text(size = 4),
axis.line.x  = element_line(size = 0.15),
axis.line.y  = element_line(size = 0.15),
plot.subtitle = element_text(size = 6),
plot.title = element_text(size = 8, face = "bold"))
pub_emission <-
ggarrange(fuel_types,
emission_subscriber,
nrow = 1,
ncol = 2)
path = file.path(visualizations, 'figures', 'fuel_and_emissions_panel.png')
dir.create(file.path(visualizations, 'figures'), showWarnings = FALSE)
png(
path,
units = "in",
width = 6.5,
height = 3.5,
res = 480
)
print(pub_emission)
dev.off()
ggarrange(fuel_types,
emission_subscriber,
nrow = 1,
ncol = 2)
source("C:/Users/eoughton/Desktop/Github/saleos/vis/test_panel.r", echo=TRUE)
ggsave(
'test_panel.png',
plot = last_plot(),
device = "png",
path=file.path(visualizations, 'figures'),
units = c("in"),
width = 8.3,
height = 6,
bg="white"
)
source("C:/Users/eoughton/Desktop/Github/saleos/vis/test_panel.r", echo=TRUE)
source("C:/Users/eoughton/Desktop/Github/saleos/vis/test_panel.r", echo=TRUE)
source("C:/Users/eoughton/Desktop/Github/saleos/vis/emissions.R", echo=TRUE)
source("C:/Users/eoughton/Desktop/Github/saleos/vis/emissions.R", echo=TRUE)
source("C:/Users/eoughton/Desktop/Github/saleos/vis/emissions.R", echo=TRUE)
source("C:/Users/eoughton/Desktop/Github/saleos/vis/emissions.R", echo=TRUE)
source("C:/Users/eoughton/Desktop/Github/saleos/vis/emissions.R", echo=TRUE)
source("C:/Users/eoughton/Desktop/Github/saleos/vis/emissions.R", echo=TRUE)
source("C:/Users/eoughton/Desktop/Github/saleos/vis/emissions.R", echo=TRUE)
source("C:/Users/eoughton/Desktop/Github/saleos/vis/emissions.R", echo=TRUE)
library(ggpubr)
library(ggplot2)
library(tidyverse)
# install.packages("ggtext")
library(ggtext)
library("readxl")
# Set default folder
folder <- dirname(rstudioapi::getSourceEditorContext()$path)
visualizations = file.path(folder, '..', 'vis')
color_palette = 'Paired'
############################
## Fuel and emissions plots
############################
rockets <-
c(
"Starlink \n(Falcon-9)",
"OneWeb \n(Soyuz-FG & \nFalcon-9)",
"OneWeb \n(Soyuz-FG & \nFalcon-9)",
"OneWeb \n(Soyuz-FG & \nFalcon-9)",
"Kuiper \n(Ariane-5)",
"Kuiper \n(Ariane-5)",
"Kuiper \n(Ariane-5)")
fuel <- c("Kerosene",
"Kerosene",
"Hypergolic",
"Kerosene",
"Solid",
"Cryogenic",
"Hypergolic")
amount <- c(500000*74, 218150*11, 7360*11, 500000*7, 480000*54, 184900*54, 10000*54)
fuels_df <- data.frame(rockets, fuel, amount)
############################
## Fuel quantities
############################
totals <- fuels_df %>%
group_by(rockets) %>%
summarize(value = signif(sum(amount / 1e6), 2))
fuel_types = ggplot(fuels_df, aes(x = rockets, y = amount / 1e6)) +
geom_bar(stat = "identity", aes(fill = fuel)) +
geom_text(
aes(
x = rockets,
y = value,
label = round(after_stat(y), 2)
),
size = 1.5,
data = totals,
vjust = -1.8,
hjust = 0.5,
position = position_stack()
) +
scale_fill_brewer(palette = color_palette) + labs(
colour = NULL,
title = "",
subtitle = "a",
x = NULL,
y = "Fuel Quantity\n(Mt)",
fill = "Fuel"
) +
scale_y_continuous(
labels = function(y)
format(y,
scientific = FALSE),
expand = c(0, 0),
limits = c(0, 60)
) +
theme_minimal() + theme(
strip.text.x = element_blank(),
panel.border = element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
axis.text.x = element_text(size = 6),
axis.text.y = element_text(size = 6),
axis.title.y = element_text(size = 6),
axis.line.x  = element_line(size = 0.15),
axis.line.y  = element_line(size = 0.15),
legend.direction = "horizontal",
legend.position = c(0.5, 0.9),
axis.title = element_text(size = 4),
legend.title = element_text(size = 6),
legend.text = element_text(size = 6),
plot.subtitle = element_text(size = 8, face = "bold"),
plot.title = element_text(size = 8, face = "bold")
) +
guides(fill = guide_legend(ncol = 2, nrow = 2))
###########################
## Emissions / subscriber##
###########################
folder <- dirname(rstudioapi::getSourceEditorContext()$path)
filename = "final_emissions_results.csv"
data <- read.csv(file.path(folder, '..', 'results', filename))
library(ggpubr)
library(ggplot2)
library(tidyverse)
# install.packages("ggtext")
library(ggtext)
library("readxl")
# Set default folder
folder <- dirname(rstudioapi::getSourceEditorContext()$path)
visualizations = file.path(folder, '..', 'vis')
color_palette = 'Paired'
############################
## Fuel and emissions plots
############################
rockets <-
c(
"Starlink \n(Falcon-9)",
"OneWeb \n(Soyuz-FG & \nFalcon-9)",
"OneWeb \n(Soyuz-FG & \nFalcon-9)",
"OneWeb \n(Soyuz-FG & \nFalcon-9)",
"Kuiper \n(Ariane-5)",
"Kuiper \n(Ariane-5)",
"Kuiper \n(Ariane-5)")
fuel <- c("Kerosene",
"Kerosene",
"Hypergolic",
"Kerosene",
"Solid",
"Cryogenic",
"Hypergolic")
amount <- c(500000*74, 218150*11, 7360*11, 500000*7, 480000*54, 184900*54, 10000*54)
fuels_df <- data.frame(rockets, fuel, amount)
############################
## Fuel quantities
############################
totals <- fuels_df %>%
group_by(rockets) %>%
summarize(value = signif(sum(amount / 1e6), 2))
fuel_types = ggplot(fuels_df, aes(x = rockets, y = amount / 1e6)) +
geom_bar(stat = "identity", aes(fill = fuel)) +
geom_text(
aes(
x = rockets,
y = value,
label = round(after_stat(y), 2)
),
size = 1.5,
data = totals,
vjust = -1.8,
hjust = 0.5,
position = position_stack()
) +
scale_fill_brewer(palette = color_palette) + labs(
colour = NULL,
title = "",
subtitle = "a",
x = NULL,
y = "Fuel Quantity\n(Mt)",
fill = "Fuel"
) +
scale_y_continuous(
labels = function(y)
format(y,
scientific = FALSE),
expand = c(0, 0),
limits = c(0, 60)
) +
theme_minimal() + theme(
strip.text.x = element_blank(),
panel.border = element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
axis.text.x = element_text(size = 6),
axis.text.y = element_text(size = 6),
axis.title.y = element_text(size = 6),
axis.line.x  = element_line(size = 0.15),
axis.line.y  = element_line(size = 0.15),
legend.direction = "horizontal",
legend.position = c(0.5, 0.9),
axis.title = element_text(size = 4),
legend.title = element_text(size = 6),
legend.text = element_text(size = 6),
plot.subtitle = element_text(size = 8, face = "bold"),
plot.title = element_text(size = 8, face = "bold")
) +
guides(fill = guide_legend(ncol = 2, nrow = 2))
###########################
## Emissions / subscriber##
###########################
folder <- dirname(rstudioapi::getSourceEditorContext()$path)
filename = "final_emissions_results.csv"
data <- read.csv(file.path(folder, '..', 'results', filename))
View(data)
folder <- dirname(rstudioapi::getSourceEditorContext()$path)
filename = "final_emissions_results.csv"
data <- read.csv(file.path(folder, '..', 'results', filename))
View(data)
folder <- dirname(rstudioapi::getSourceEditorContext()$path)
filename = "final_emissions_results.csv"
data <- read.csv(file.path(folder, '..', 'results', filename))
data = data[(data$impact_category == 'total_global_warming_em'),]
View(data)
df = data %>%
group_by(constellation, subscriber_scenario) %>%
summarize(
#this isn't a mean/shouldn't be a mean
value = total_climate_emissions_kg / subscribers,
value_wc = total_climate_emissions_wc_kg / subscribers,
)
View(df)
df = df %>%
spread(subscriber_scenario, value)
View(df)
df = data %>%
group_by(constellation, subscriber_scenario) %>%
summarize(
#this isn't a mean/shouldn't be a mean
value = total_climate_emissions_kg / subscribers,
value_wc = total_climate_emissions_wc_kg / subscribers,
)
df = df %>%
spread(subscriber_scenario, value, value_wc)
View(df)
df = data %>%
group_by(constellation, subscriber_scenario) %>%
summarize(
#this isn't a mean/shouldn't be a mean
value = total_climate_emissions_kg / subscribers,
value_wc = total_climate_emissions_wc_kg / subscribers,
)
View(df)
df$Constellation = factor(
df$constellation,
levels = c('Kuiper', 'OneWeb', 'Starlink'),
labels = c(
'Kuiper \n(Ariane-5)',
'OneWeb \n(Soyuz-FG & \nFalcon-9)',
'Starlink \n(Falcon-9)'
)
)
View(df)
df = data %>%
group_by(constellation, subscriber_scenario) %>%
summarize(
#this isn't a mean/shouldn't be a mean
value = total_climate_emissions_kg / subscribers,
value_wc = total_climate_emissions_wc_kg / subscribers,
)
View(df)
test = df %>%
pivot_longer(!c(constellation, subscriber_scenario), names_to = "income", values_to = "count")
View(test)
test = df %>%
pivot_longer(!c(constellation, subscriber_scenario), names_to = "value_type", values_to = "emissions/subscriber")
View(test)
###########################
folder <- dirname(rstudioapi::getSourceEditorContext()$path)
filename = "final_emissions_results.csv"
data <- read.csv(file.path(folder, '..', 'results', filename))
data = data[(data$impact_category == 'total_global_warming_em'),]
df = data %>%
group_by(constellation, subscriber_scenario) %>%
summarize(
#this isn't a mean/shouldn't be a mean
value = total_climate_emissions_kg / subscribers,
value_wc = total_climate_emissions_wc_kg / subscribers,
)
df = df %>%
pivot_longer(!c(constellation, subscriber_scenario), names_to = "value_type", values_to = "emissions/subscriber")
df$Constellation = factor(
df$constellation,
levels = c('Kuiper', 'OneWeb', 'Starlink'),
labels = c(
'Kuiper \n(Ariane-5)',
'OneWeb \n(Soyuz-FG & \nFalcon-9)',
'Starlink \n(Falcon-9)'
)
)
# emission_subscriber <-
ggplot(df, aes(x = Constellation,
y = subscribers_baseline)) +
geom_bar(stat = "identity",
width = 0.9, fill="lightgrey") + ##A6CEE3
geom_errorbar(data=df, aes(
y=subscribers_baseline, ymin=subscribers_low, ymax=subscribers_high),
position = position_dodge(1),
lwd = 0.2,
show.legend = FALSE, width=0.1,  color="black") +
scale_fill_brewer(palette = color_palette) +
theme_minimal() +
labs(
colour = NULL,
title = "",
subtitle = "b",
x = NULL,
fill = 'Scenario'
) +
ylab("Emissions/Subscriber<br>(t CO<sub>2</sub>eq)") +
scale_y_continuous(
labels = function(y)
format(y, scientific = FALSE),
expand = c(0, 0)
) + theme_minimal() +
theme(
strip.text.x = element_blank(),
panel.border = element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
axis.text.x = element_text(size = 6),
axis.text.y = element_text(size = 6),
axis.title.y = element_markdown(),
legend.position = c(0.8, 0.85),
axis.title = element_text(size = 6),
legend.title = element_text(size = 4),
legend.text = element_text(size = 4),
axis.line.x  = element_line(size = 0.15),
axis.line.y  = element_line(size = 0.15),
plot.subtitle = element_text(size = 8, face = "bold"),
plot.title = element_text(size = 8, face = "bold"))
ggplot(df, aes(x = Constellation,
y = subscribers_baseline)) +
geom_bar(stat = "identity",
width = 0.9, fill="lightgrey")
View(df)
df = data %>%
group_by(constellation, subscriber_scenario) %>%
summarize(
#this isn't a mean/shouldn't be a mean
value = total_climate_emissions_kg / subscribers,
value_wc = total_climate_emissions_wc_kg / subscribers,
)
df = df %>%
pivot_longer(!c(constellation, subscriber_scenario), names_to = "value_type", values_to = "emissions/subscriber")
df = df %>%
spread(subscriber_scenario, emissions/subscriber)
df = df %>%
spread(subscriber_scenario, emissions_subscriber)
df = data %>%
group_by(constellation, subscriber_scenario) %>%
summarize(
#this isn't a mean/shouldn't be a mean
value = total_climate_emissions_kg / subscribers,
value_wc = total_climate_emissions_wc_kg / subscribers,
)
df = df %>%
pivot_longer(!c(constellation, subscriber_scenario), names_to = "value_type", values_to = "emissions_subscriber")
df = df %>%
spread(subscriber_scenario, emissions_subscriber)
View(df)
df$Constellation = factor(
df$constellation,
levels = c('Kuiper', 'OneWeb', 'Starlink'),
labels = c(
'Kuiper \n(Ariane-5)',
'OneWeb \n(Soyuz-FG & \nFalcon-9)',
'Starlink \n(Falcon-9)'
)
)
# emission_subscriber <-
ggplot(df, aes(x = Constellation,
y = subscribers_baseline)) +
geom_bar(stat = "identity",
width = 0.9, fill="lightgrey") + ##A6CEE3
geom_errorbar(data=df, aes(
y=subscribers_baseline, ymin=subscribers_low, ymax=subscribers_high),
position = position_dodge(1),
lwd = 0.2,
show.legend = FALSE, width=0.1,  color="black") +
scale_fill_brewer(palette = color_palette) +
theme_minimal() +
labs(
colour = NULL,
title = "",
subtitle = "b",
x = NULL,
fill = 'Scenario'
) +
ylab("Emissions/Subscriber<br>(t CO<sub>2</sub>eq)") +
scale_y_continuous(
labels = function(y)
format(y, scientific = FALSE),
expand = c(0, 0)
) + theme_minimal() +
theme(
strip.text.x = element_blank(),
panel.border = element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
axis.text.x = element_text(size = 6),
axis.text.y = element_text(size = 6),
axis.title.y = element_markdown(),
legend.position = c(0.8, 0.85),
axis.title = element_text(size = 6),
legend.title = element_text(size = 4),
legend.text = element_text(size = 4),
axis.line.x  = element_line(size = 0.15),
axis.line.y  = element_line(size = 0.15),
plot.subtitle = element_text(size = 8, face = "bold"),
plot.title = element_text(size = 8, face = "bold"))
ggplot(df, aes(x = Constellation,
y = subscribers_baseline)) +
geom_bar(stat = "identity",
width = 0.9, fill="lightgrey") + ##A6CEE3
geom_errorbar(data=df, aes(
y=subscribers_baseline, ymin=subscribers_low, ymax=subscribers_high),
position = position_dodge(1),
lwd = 0.2,
show.legend = FALSE, width=0.1,  color="black")
ggplot(df, aes(x = Constellation,
y = subscribers_baseline)) +
geom_bar(position="dodge2",
width = 0.9, fill="lightgrey")
ggplot(df, aes(x = Constellation,y = subscribers_baseline, fill=value_type)) +
geom_bar(position="dodge2",
width = 0.9, fill="lightgrey")
ggplot(df, aes(x = Constellation,y = subscribers_baseline, fill=value_type)) +
geom_bar(position="dodge2",
width = 0.9, fill=value_type)
View(df)
ggplot(df, aes(x = Constellation,y = subscribers_baseline)) +
geom_bar(position="dodge2",
width = 0.9, fill=value_type)
ggplot(df, aes(x = Constellation,y = subscribers_baseline))
ggplot(df, aes(x = Constellation, y = emissions_subscriber))
ggplot(df, aes(x = Constellation, y = emissions_subscriber)) +
geom_bar(position="dodge2",
width = 0.9, fill=value_type)
View(df)
ggplot(df, aes(x = Constellation, y = subscribers_baseline)) +
geom_bar(position="dodge2",
width = 0.9, fill=value_type)
ggplot(df, aes(x = Constellation, y = subscribers_baseline, fill=value_type)) +
geom_bar(position="dodge2",
width = 0.9, fill=value_type)
ggplot(df, aes(x = Constellation, y = subscribers_baseline, fill=value_type))
View(df)
folder <- dirname(rstudioapi::getSourceEditorContext()$path)
filename = "final_emissions_results.csv"
data <- read.csv(file.path(folder, '..', 'results', filename))
data = data[(data$impact_category == 'total_global_warming_em'),]
df = data %>%
group_by(constellation, subscriber_scenario) %>%
summarize(
#this isn't a mean/shouldn't be a mean
value = total_climate_emissions_kg / subscribers,
value_wc = total_climate_emissions_wc_kg / subscribers,
)
df = df %>%
pivot_longer(!c(constellation, subscriber_scenario), names_to = "value_type", values_to = "emissions_subscriber")
df = df %>%
spread(subscriber_scenario, emissions_subscriber)
df$Constellation = factor(
df$constellation,
levels = c('Kuiper', 'OneWeb', 'Starlink'),
labels = c(
'Kuiper \n(Ariane-5)',
'OneWeb \n(Soyuz-FG & \nFalcon-9)',
'Starlink \n(Falcon-9)'
)
)
ggplot(df, aes(x=Constellation, y=subscribers_baseline, fill=value_type))
ggplot(df, aes(x=Constellation, y=subscribers_baseline, fill=value_type)) +
geom_bar(position="dodge2",
width = 0.9, fill=value_type)
ggplot(df, aes(x=Constellation, y=subscribers_baseline, fill=value_type)) +
geom_bar(position="dodge2",
width = 0.9)
ggplot(df, aes(x=Constellation, y=subscribers_baseline, fill=value_type)) +
geom_bar(position="dodge2")
ggplot(df, aes(x=factor(Constellation), fill=factor(value_type))) +
geom_bar(position="dodge2")
data(mtcars)
mtcars = data(mtcars)
