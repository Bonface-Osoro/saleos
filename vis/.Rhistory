spread(subscriber_scenario, value)
View(df)
df = data %>%
group_by(constellation, subscriber_scenario) %>%
summarize(
#this isn't a mean/shouldn't be a mean
value = total_climate_emissions_kg / subscribers,
value_wc = total_climate_emissions_wc_kg / subscribers,
)
df = df %>%
spread(subscriber_scenario, value, value_wc)
View(df)
df = data %>%
group_by(constellation, subscriber_scenario) %>%
summarize(
#this isn't a mean/shouldn't be a mean
value = total_climate_emissions_kg / subscribers,
value_wc = total_climate_emissions_wc_kg / subscribers,
)
View(df)
df$Constellation = factor(
df$constellation,
levels = c('Kuiper', 'OneWeb', 'Starlink'),
labels = c(
'Kuiper \n(Ariane-5)',
'OneWeb \n(Soyuz-FG & \nFalcon-9)',
'Starlink \n(Falcon-9)'
)
)
View(df)
df = data %>%
group_by(constellation, subscriber_scenario) %>%
summarize(
#this isn't a mean/shouldn't be a mean
value = total_climate_emissions_kg / subscribers,
value_wc = total_climate_emissions_wc_kg / subscribers,
)
View(df)
test = df %>%
pivot_longer(!c(constellation, subscriber_scenario), names_to = "income", values_to = "count")
View(test)
test = df %>%
pivot_longer(!c(constellation, subscriber_scenario), names_to = "value_type", values_to = "emissions/subscriber")
View(test)
###########################
folder <- dirname(rstudioapi::getSourceEditorContext()$path)
filename = "final_emissions_results.csv"
data <- read.csv(file.path(folder, '..', 'results', filename))
data = data[(data$impact_category == 'total_global_warming_em'),]
df = data %>%
group_by(constellation, subscriber_scenario) %>%
summarize(
#this isn't a mean/shouldn't be a mean
value = total_climate_emissions_kg / subscribers,
value_wc = total_climate_emissions_wc_kg / subscribers,
)
df = df %>%
pivot_longer(!c(constellation, subscriber_scenario), names_to = "value_type", values_to = "emissions/subscriber")
df$Constellation = factor(
df$constellation,
levels = c('Kuiper', 'OneWeb', 'Starlink'),
labels = c(
'Kuiper \n(Ariane-5)',
'OneWeb \n(Soyuz-FG & \nFalcon-9)',
'Starlink \n(Falcon-9)'
)
)
# emission_subscriber <-
ggplot(df, aes(x = Constellation,
y = subscribers_baseline)) +
geom_bar(stat = "identity",
width = 0.9, fill="lightgrey") + ##A6CEE3
geom_errorbar(data=df, aes(
y=subscribers_baseline, ymin=subscribers_low, ymax=subscribers_high),
position = position_dodge(1),
lwd = 0.2,
show.legend = FALSE, width=0.1,  color="black") +
scale_fill_brewer(palette = color_palette) +
theme_minimal() +
labs(
colour = NULL,
title = "",
subtitle = "b",
x = NULL,
fill = 'Scenario'
) +
ylab("Emissions/Subscriber<br>(t CO<sub>2</sub>eq)") +
scale_y_continuous(
labels = function(y)
format(y, scientific = FALSE),
expand = c(0, 0)
) + theme_minimal() +
theme(
strip.text.x = element_blank(),
panel.border = element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
axis.text.x = element_text(size = 6),
axis.text.y = element_text(size = 6),
axis.title.y = element_markdown(),
legend.position = c(0.8, 0.85),
axis.title = element_text(size = 6),
legend.title = element_text(size = 4),
legend.text = element_text(size = 4),
axis.line.x  = element_line(size = 0.15),
axis.line.y  = element_line(size = 0.15),
plot.subtitle = element_text(size = 8, face = "bold"),
plot.title = element_text(size = 8, face = "bold"))
ggplot(df, aes(x = Constellation,
y = subscribers_baseline)) +
geom_bar(stat = "identity",
width = 0.9, fill="lightgrey")
View(df)
df = data %>%
group_by(constellation, subscriber_scenario) %>%
summarize(
#this isn't a mean/shouldn't be a mean
value = total_climate_emissions_kg / subscribers,
value_wc = total_climate_emissions_wc_kg / subscribers,
)
df = df %>%
pivot_longer(!c(constellation, subscriber_scenario), names_to = "value_type", values_to = "emissions/subscriber")
df = df %>%
spread(subscriber_scenario, emissions/subscriber)
df = df %>%
spread(subscriber_scenario, emissions_subscriber)
df = data %>%
group_by(constellation, subscriber_scenario) %>%
summarize(
#this isn't a mean/shouldn't be a mean
value = total_climate_emissions_kg / subscribers,
value_wc = total_climate_emissions_wc_kg / subscribers,
)
df = df %>%
pivot_longer(!c(constellation, subscriber_scenario), names_to = "value_type", values_to = "emissions_subscriber")
df = df %>%
spread(subscriber_scenario, emissions_subscriber)
View(df)
df$Constellation = factor(
df$constellation,
levels = c('Kuiper', 'OneWeb', 'Starlink'),
labels = c(
'Kuiper \n(Ariane-5)',
'OneWeb \n(Soyuz-FG & \nFalcon-9)',
'Starlink \n(Falcon-9)'
)
)
# emission_subscriber <-
ggplot(df, aes(x = Constellation,
y = subscribers_baseline)) +
geom_bar(stat = "identity",
width = 0.9, fill="lightgrey") + ##A6CEE3
geom_errorbar(data=df, aes(
y=subscribers_baseline, ymin=subscribers_low, ymax=subscribers_high),
position = position_dodge(1),
lwd = 0.2,
show.legend = FALSE, width=0.1,  color="black") +
scale_fill_brewer(palette = color_palette) +
theme_minimal() +
labs(
colour = NULL,
title = "",
subtitle = "b",
x = NULL,
fill = 'Scenario'
) +
ylab("Emissions/Subscriber<br>(t CO<sub>2</sub>eq)") +
scale_y_continuous(
labels = function(y)
format(y, scientific = FALSE),
expand = c(0, 0)
) + theme_minimal() +
theme(
strip.text.x = element_blank(),
panel.border = element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
axis.text.x = element_text(size = 6),
axis.text.y = element_text(size = 6),
axis.title.y = element_markdown(),
legend.position = c(0.8, 0.85),
axis.title = element_text(size = 6),
legend.title = element_text(size = 4),
legend.text = element_text(size = 4),
axis.line.x  = element_line(size = 0.15),
axis.line.y  = element_line(size = 0.15),
plot.subtitle = element_text(size = 8, face = "bold"),
plot.title = element_text(size = 8, face = "bold"))
ggplot(df, aes(x = Constellation,
y = subscribers_baseline)) +
geom_bar(stat = "identity",
width = 0.9, fill="lightgrey") + ##A6CEE3
geom_errorbar(data=df, aes(
y=subscribers_baseline, ymin=subscribers_low, ymax=subscribers_high),
position = position_dodge(1),
lwd = 0.2,
show.legend = FALSE, width=0.1,  color="black")
ggplot(df, aes(x = Constellation,
y = subscribers_baseline)) +
geom_bar(position="dodge2",
width = 0.9, fill="lightgrey")
ggplot(df, aes(x = Constellation,y = subscribers_baseline, fill=value_type)) +
geom_bar(position="dodge2",
width = 0.9, fill="lightgrey")
ggplot(df, aes(x = Constellation,y = subscribers_baseline, fill=value_type)) +
geom_bar(position="dodge2",
width = 0.9, fill=value_type)
View(df)
ggplot(df, aes(x = Constellation,y = subscribers_baseline)) +
geom_bar(position="dodge2",
width = 0.9, fill=value_type)
ggplot(df, aes(x = Constellation,y = subscribers_baseline))
ggplot(df, aes(x = Constellation, y = emissions_subscriber))
ggplot(df, aes(x = Constellation, y = emissions_subscriber)) +
geom_bar(position="dodge2",
width = 0.9, fill=value_type)
View(df)
ggplot(df, aes(x = Constellation, y = subscribers_baseline)) +
geom_bar(position="dodge2",
width = 0.9, fill=value_type)
ggplot(df, aes(x = Constellation, y = subscribers_baseline, fill=value_type)) +
geom_bar(position="dodge2",
width = 0.9, fill=value_type)
ggplot(df, aes(x = Constellation, y = subscribers_baseline, fill=value_type))
View(df)
folder <- dirname(rstudioapi::getSourceEditorContext()$path)
filename = "final_emissions_results.csv"
data <- read.csv(file.path(folder, '..', 'results', filename))
data = data[(data$impact_category == 'total_global_warming_em'),]
df = data %>%
group_by(constellation, subscriber_scenario) %>%
summarize(
#this isn't a mean/shouldn't be a mean
value = total_climate_emissions_kg / subscribers,
value_wc = total_climate_emissions_wc_kg / subscribers,
)
df = df %>%
pivot_longer(!c(constellation, subscriber_scenario), names_to = "value_type", values_to = "emissions_subscriber")
df = df %>%
spread(subscriber_scenario, emissions_subscriber)
df$Constellation = factor(
df$constellation,
levels = c('Kuiper', 'OneWeb', 'Starlink'),
labels = c(
'Kuiper \n(Ariane-5)',
'OneWeb \n(Soyuz-FG & \nFalcon-9)',
'Starlink \n(Falcon-9)'
)
)
ggplot(df, aes(x=Constellation, y=subscribers_baseline, fill=value_type))
ggplot(df, aes(x=Constellation, y=subscribers_baseline, fill=value_type)) +
geom_bar(position="dodge2",
width = 0.9, fill=value_type)
ggplot(df, aes(x=Constellation, y=subscribers_baseline, fill=value_type)) +
geom_bar(position="dodge2",
width = 0.9)
ggplot(df, aes(x=Constellation, y=subscribers_baseline, fill=value_type)) +
geom_bar(position="dodge2")
ggplot(df, aes(x=factor(Constellation), fill=factor(value_type))) +
geom_bar(position="dodge2")
data(mtcars)
mtcars = data(mtcars)
source("~/Documents/GitHub/saleos/vis/orbit_rocket.r", echo=TRUE)
source("~/Documents/GitHub/saleos/vis/orbit_rocket.r", echo=TRUE)
stl
source("~/Documents/GitHub/saleos/vis/orbit_rocket.r", echo=TRUE)
source("~/Documents/GitHub/saleos/vis/orbit_rocket.r", echo=TRUE)
source("~/Documents/GitHub/saleos/vis/orbit_rocket.r", echo=TRUE)
source("~/Documents/GitHub/saleos/vis/orbit_rocket.r", echo=TRUE)
source("~/Documents/GitHub/saleos/vis/orbit_rocket.r", echo=TRUE)
source("~/Documents/GitHub/saleos/vis/orbit_rocket.r", echo=TRUE)
source("~/Documents/GitHub/saleos/vis/aggregate_metrics.r", echo=TRUE)
source("~/Documents/GitHub/saleos/vis/aggregate_metrics.r", echo=TRUE)
source("~/Documents/GitHub/saleos/vis/aggregate_metrics.r", echo=TRUE)
source("~/Documents/GitHub/saleos/vis/aggregate_metrics.r", echo=TRUE)
source("~/Documents/GitHub/saleos/vis/aggregate_metrics.r", echo=TRUE)
source("~/Documents/GitHub/saleos/vis/aggregate_metrics.r", echo=TRUE)
constellation_tco_per_user
source("~/Documents/GitHub/saleos/vis/aggregate_metrics.r", echo=TRUE)
source("~/Documents/GitHub/saleos/vis/emissions.R", echo=TRUE)
source("~/Documents/GitHub/saleos/vis/social_cost.r", echo=TRUE)
source("~/Documents/GitHub/saleos/vis/social_cost.r", echo=TRUE)
source("~/Documents/GitHub/saleos/vis/social_cost.r", echo=TRUE)
source("~/Documents/GitHub/saleos/vis/social_cost.r", echo=TRUE)
social_carbon_baseline
source("~/Documents/GitHub/saleos/vis/social_cost.r", echo=TRUE)
social_carbon_baseline
social_carbon_baseline
source("~/Documents/GitHub/saleos/vis/social_cost.r", echo=TRUE)
social_carbon_baseline
source("~/Documents/GitHub/saleos/vis/social_cost.r", echo=TRUE)
source("~/Documents/GitHub/saleos/vis/social_cost.r", echo=TRUE)
source("~/Documents/GitHub/saleos/vis/social_cost.r", echo=TRUE)
source("~/Documents/GitHub/saleos/vis/social_cost.r", echo=TRUE)
source("~/Documents/GitHub/saleos/vis/social_cost.r", echo=TRUE)
source("~/Documents/GitHub/saleos/vis/social_cost.r", echo=TRUE)
source("~/Documents/GitHub/saleos/vis/social_cost.r", echo=TRUE)
library(ggpubr)
library(ggplot2)
library(dplyr)
library(tidyverse)
library("readxl")
library(ggtext)
library(scales)
###########################
## Read and Process Data ##
###########################
folder <- dirname(rstudioapi::getSourceEditorContext()$path)
visualizations = file.path(folder, '..', 'vis')
filename = "individual_emissions.csv"
data <- read.csv(file.path(folder, '..', 'results', filename))
data = select(
data,
constellation,
impact_category,
climate_change_baseline_kg,
climate_change_worst_case_kg,
ozone_depletion_baseline_kg,
ozone_depletion_worst_case_kg,
subscriber_scenario,
subscribers
)
data$impact_category = factor(
data$impact_category,
levels =c(
"launcher_production", "propellant_production",
"launch_campaign", "launcher_transportation",
"launcher_ait", "propellant_scheduling",
"launch_event"),
labels = c(
"Launcher Production", "Launcher Propellant Production",
"Launch Campaign", "Transportation of Launcher",
"Launcher AIT", "SCHD of Propellant", "Launch Event"))
data$constellation = factor(
data$constellation,
levels = c('geo_generic', 'kuiper', 'oneweb', 'starlink'),
labels = c('GEO', 'Kuiper', 'OneWeb', 'Starlink'))
data_aggregated <- data %>%
group_by(constellation,
impact_category,
climate_change_baseline_kg,
climate_change_worst_case_kg,
ozone_depletion_baseline_kg,
ozone_depletion_worst_case_kg,
subscriber_scenario) %>%
summarize(subscribers = mean(subscribers))
individual_emissions <- spread(data_aggregated, key = subscriber_scenario, value = subscribers)
###############################
##Social carbon cost baseline##
###############################
df = individual_emissions %>%
group_by(constellation, impact_category) %>%
summarize(value = climate_change_baseline_kg)
#from kg to tonnes
df$emissions_t = df$value / 1e3
df$social_cost_milions_usd = (df$emissions_t * 185) / 1e6
totals <- df %>%
group_by(constellation) %>%
summarize(social_cost_milions_usd = (sum(value/1e3) * 185)/1e6)
social_carbon_baseline <-
ggplot(df, aes(x = constellation, y = social_cost_milions_usd)) +
geom_bar(stat = "identity", aes(fill = impact_category)) +
geom_text(
aes(
x = constellation,
y = social_cost_milions_usd,
label = paste0("$", comma(round(social_cost_milions_usd,0)), " mn")
),
size = 2,
data = totals,
vjust = -.5,
hjust = 0.5,
position = position_stack()
)  +
scale_fill_brewer(palette = "Dark2") +
theme_minimal() +
labs(
colour = NULL,
# title = "a",
subtitle = "a",
x = NULL,
fill = "Satellite\nMission\nStage"
) +
ylab("Social Cost<br>(Baseline) (US$ Millions)") +
scale_y_continuous(
labels = comma,
limits = c(0, 1600),
expand = c(0, 0)
) +
theme(
legend.position = "bottom",
axis.title = element_text(size = 6),
axis.line = element_line(colour = "black"),
strip.text.x = element_blank(),
panel.border = element_blank(),
axis.title.y = element_markdown(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
legend.title = element_text(size = 6),
legend.text = element_text(size = 6),
axis.text.x = element_text(size = 6),
axis.text.y = element_text(size = 6),
axis.line.x  = element_line(size = 0.15),
axis.line.y  = element_line(size = 0.15),
plot.subtitle = element_text(size = 8, face = "bold"),
plot.title = element_text(size = 8, face = "bold")
)
social_carbon_baseline
source("~/Documents/GitHub/saleos/vis/social_cost.r", echo=TRUE)
source("~/Documents/GitHub/saleos/vis/social_cost.r", echo=TRUE)
df = select(
individual_emissions,
constellation,
impact_category,
climate_change_baseline_kg,
subscribers_baseline,
subscribers_low,
subscribers_high
)
df$social_cost_usd_per_user_low = (
((df$climate_change_baseline_kg / 1e3) * 185) / df$subscribers_low
)
df$social_cost_usd_per_user_baseline = (
((df$climate_change_baseline_kg / 1e3) * 185) / df$subscribers_baseline
)
df$social_cost_usd_per_user_high = (
((df$climate_change_baseline_kg / 1e3) * 185) / df$subscribers_high
)
totals <- df %>%
group_by(constellation) %>%
summarize(
social_cost_usd_per_user_low = round(sum(social_cost_usd_per_user_low),1),
social_cost_usd_per_user_baseline = round(sum(social_cost_usd_per_user_baseline),1),
social_cost_usd_per_user_high = round(sum(social_cost_usd_per_user_high),1),
)
data_aggregated  = df %>%
group_by(constellation) %>%
summarise(
social_cost_usd_per_user_low = round(sum(social_cost_usd_per_user_low),1),
social_cost_usd_per_user_baseline = round(sum(social_cost_usd_per_user_baseline),1),
social_cost_usd_per_user_high = round(sum(social_cost_usd_per_user_high),1),
)
# data_aggregated = spread(data_aggregated, percentile, cell_count)
social_carbon_per_subscriber_baseline <-
ggplot(df, aes(x = constellation, y = social_cost_usd_per_user_baseline)) +
geom_bar(stat = "identity", aes(fill = impact_category)) +
geom_errorbar(data=data_aggregated,
aes(y=social_cost_usd_per_user_baseline,
ymin=social_cost_usd_per_user_low,
ymax=social_cost_usd_per_user_high),
position = position_dodge(1),
lwd = 0.2,
show.legend = FALSE, width=0.05,  color="#FF0000FF") +
geom_text(
aes(
x = constellation,
y = social_cost_usd_per_user_baseline,
label = paste0("$", comma(round(social_cost_usd_per_user_baseline,0))
),
size = 2,
data = totals,
vjust = -.5,
hjust = 1.3,
position = position_stack()
)  +
scale_fill_brewer(palette = "Dark2") + theme_minimal() +
labs(
colour = NULL,
# title = "a",
subtitle = "c",
x = NULL,
fill = "Satellite\nMission\nStage"
) +
ylab("Social Cost/Subscriber<br>(Baseline) (US$)") + # given t CO<sub>2</sub>eq
scale_y_continuous(
limits = c(0, 2500),
labels = comma,
expand = c(0, 0)
) +
theme(
legend.position = "bottom",
axis.title = element_text(size = 6),
axis.line = element_line(colour = "black"),
strip.text.x = element_blank(),
panel.border = element_blank(),
axis.title.y = element_markdown(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
legend.title = element_text(size = 6),
legend.text = element_text(size = 6),
axis.text.x = element_text(size = 6),
axis.text.y = element_text(size = 6),
axis.line.x  = element_line(size = 0.15),
axis.line.y  = element_line(size = 0.15),
plot.subtitle = element_text(size = 8, face = "bold"),
plot.title = element_text(size = 8, face = "bold")
)
df = select(
source("~/Documents/GitHub/saleos/vis/social_cost.r", echo=TRUE)
source("~/Documents/GitHub/saleos/vis/social_cost.r", echo=TRUE)
source("~/Documents/GitHub/saleos/vis/social_cost.r", echo=TRUE)
source("~/Documents/GitHub/saleos/vis/social_cost.r", echo=TRUE)
source("~/Documents/GitHub/saleos/vis/social_cost.r", echo=TRUE)
source("~/Documents/GitHub/saleos/vis/social_cost.r", echo=TRUE)
source("~/Documents/GitHub/saleos/vis/social_cost.r", echo=TRUE)
source("~/Documents/GitHub/saleos/vis/social_cost.r", echo=TRUE)
source("~/Documents/GitHub/saleos/vis/social_cost.r", echo=TRUE)
source("~/Documents/GitHub/saleos/vis/social_cost.r", echo=TRUE)
source("~/Documents/GitHub/saleos/vis/social_cost.r", echo=TRUE)
source("~/Documents/GitHub/saleos/vis/social_cost.r", echo=TRUE)
source("~/Documents/GitHub/saleos/vis/emissions.R", echo=TRUE)
source("~/Documents/GitHub/saleos/vis/emissions.R", echo=TRUE)
